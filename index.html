<!--Author: Genwealth 360 Inc. -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GenwealthSuite Tax Input Form</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Merriweather:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="360.png">
</head>
<body>

  <div class="notes-area">

    <button id="notesButton" class="notes-btn">
      <i class="fas fa-sticky-note"></i> Notes
    </button>

    <div class="undo-redo-buttons">
     <!-- Add Undo/Redo next to Notes -->
    <button id="undoButton" class="notes-btn">Undo</button>
    <button id="redoButton" class="notes-btn">Redo</button>
    </div>
    
    <div id="notesContainer" class="notes-container hidden">
      
      <div class="notes-toolbar">
        <button type="button" id="notesBoldBtn"><b>Bold</b></button>
        <button type="button" id="notesHighlightBtn">Highlight</button>
      </div>
  
      <div id="notesEditor" class="notes-editor" contenteditable="true"></div>
    </div>
  </div>
  
  <nav class="navbar">

  <img src="Assets\genwealth_logo.png" alt="Genwealth 360 Logo" class="logo">

    <div class="dark-mode-toggle">
      <input type="checkbox" id="darkModeToggle" />
      <label for="darkModeToggle" class="dark-mode-label">
        <span class="toggle-ball"></span>
      </label>
    </div>

    <div class="dropdown">
      <button class="dropbtn"><i class="fas fa-bars"></i> Menu</button>
      <div class="dropdown-content">
        <a href="#personalInformation">Personal Information</a>
        <a href="#income">Income</a>
        <a href="#businesses">Business</a>
        <a href="#adjustedGrossIncome">Adjusted Gross Income</a>
        <a href="#Deductions">Deductions</a>
        <a href="#taxAndCredits">Tax and Credits</a>
        <a href="#payments">Payments</a>
        <a href="#employerEmployeeTaxes">Employer and Employee Taxes</a>
        <a href="#stateTaxableIncome">State Taxable Income</a>
        <a href="#totalTaxSection">Total Tax</a>
        <a href="#gw-restructure">Restructure</a>
        <a href="#adjustment-summary">Strategic Adjustment Summary</a>
        <a href="#submitButton">Submit</a>
      </div>
    </div>
  </nav>
 
  <div class="container">
    <h1>Genwealth 1040 Input Form</h1>

    <form id="taxForm" novalidate>

      <!-- Personal Information Section -->
      <section id="personalInformation">
        <h2 data-target="personalInformationContent">
          Personal Information
        </h2>
        <div id="personalInformationContent">
        
          <div class="form-group">
          <label for="typeOfAnalysis">Type of Analysis?:</label>
          <select id="typeOfAnalysis" name="typeOfAnalysis" required>
            <option value="please select" disabled selected>Please Select</option>
            <option value="Actual">Actual</option>
            <option value="Draft">Draft</option>
            <option value="Mock">Mock</option>
            <option value="Restructure">Restructure</option>
            <option value="TSAI">TSAI</option>
          </select>
        </div>

        <div class="form-group">
          <label for="firstName">First Name:</label>
          <input type="text" id="firstName" name="firstName" required>
        </div>

        <div class="form-group">
          <label for="lastName">Last Name:</label>
          <input type="text" id="lastName" name="lastName" required>
        </div>

        <div class="form-group">
            <label for="year"> Enter Tax Year:</label>
            <select id="year" name="year" required>
                <option value="please select" disabled selected>Please Select</option>
                <option value="2022">2022</option>
                <option value="2023">2023</option>
                <option value="2024">2024</option>
                <option value="2025">2025</option>
                <option value="2026">2026</option>
            </select>
          </div>

        <div class="form-group">
          <label for="filingStatus">Filing Status:</label>
          <select id="filingStatus" name="filingStatus" required>
            <option value="please select" disabled selected>Please Select</option>
            <option value="Single">Single</option>
            <option value="Married Filing Jointly">Married Filing Jointly</option>
            <option value="Married Filing Separately">Married Filing Separately</option>
            <option value="Head of Household">Head of Household</option>
            <option value="Qualifying Widow(er)">Qualifying Widow(er)</option>
          </select>
        </div>

          <div class="form-group">
            <label for="birthdate">Birthdate:</label>
            <input type="date" id="birthdate" name="birthdate">
          </div>

          <div class="form-group">
            <label for="currentAge">Current Age:</label>
            <input type="text" id="currentAge" name="currentAge">
          </div>

        <div class="form-group spouseSection" id="spouseSection" style="display:none;">
           <h1>Spouse Information</h1>

          <div class="form-group">
            <label for="spouseFirstName">Spouse First Name:</label>
            <input type="text" id="spouseFirstName" name="spouseFirstName">
          </div>
          
          <div class="form-group">
            <label for="spouseLastName">Spouse Last Name:</label>
            <input type="text" id="spouseLastName" name="spouseLastName">
          </div>
          
          <div class="form-group">
            <label for="spouseBirthdate">Spouse Birthdate:</label>
            <input type="date" id="spouseBirthdate" name="spouseBirthdate">
          </div>
          
          <div class="form-group">
            <label for="spouseCurrentAge">Spouse Current Age:</label>
            <input type="text" id="spouseCurrentAge" name="spouseCurrentAge">
          </div>
          
        </div>

          <div class="form-group">
            <label for="state">State:</label>
            <select id="state" name="state" required>
            <option value="" disabled selected>Please Select</option>
            <option value="Alabama">Alabama</option>
            <option value="Alaska">Alaska</option>
            <option value="Arizona">Arizona</option>
            <option value="Arkansas">Arkansas</option>
            <option value="California">California</option>
            <option value="Colorado">Colorado</option>
            <option value="Connecticut">Connecticut</option>
            <option value="Delaware">Delaware</option>
            <option value="Florida">Florida</option>
            <option value="Georgia">Georgia</option>
            <option value="Hawaii">Hawaii</option>
            <option value="Idaho">Idaho</option>
            <option value="Illinois">Illinois</option>
            <option value="Indiana">Indiana</option>
            <option value="Iowa">Iowa</option>
            <option value="Kansas">Kansas</option>
            <option value="Kentucky">Kentucky</option>
            <option value="Louisiana">Louisiana</option>
            <option value="Maine">Maine</option>
            <option value="Maryland">Maryland</option>
            <option value="Massachusetts">Massachusetts</option>
            <option value="Michigan">Michigan</option>
            <option value="Minnesota">Minnesota</option>
            <option value="Mississippi">Mississippi</option>
            <option value="Missouri">Missouri</option>
            <option value="Montana">Montana</option>
            <option value="Nebraska">Nebraska</option>
            <option value="Nevada">Nevada</option>
            <option value="New Hampshire">New Hampshire</option>
            <option value="New Jersey">New Jersey</option>
            <option value="New Mexico">New Mexico</option>
            <option value="New York">New York</option>
            <option value="North Carolina">North Carolina</option>
            <option value="North Dakota">North Dakota</option>
            <option value="Ohio">Ohio</option>
            <option value="Oklahoma">Oklahoma</option>
            <option value="Oregon">Oregon</option>
            <option value="Pennsylvania">Pennsylvania</option>
            <option value="Rhode Island">Rhode Island</option>
            <option value="South Carolina">South Carolina</option>
            <option value="South Dakota">South Dakota</option>
            <option value="Tennessee">Tennessee</option>
            <option value="Texas">Texas</option>
            <option value="Utah">Utah</option>
            <option value="Vermont">Vermont</option>
            <option value="Virginia">Virginia</option>
            <option value="Washington">Washington</option>
            <option value="Washington D.C.">Washington D.C.</option>
            <option value="West Virginia">West Virginia</option>
            <option value="Wisconsin">Wisconsin</option>
            <option value="Wyoming">Wyoming</option>
            </select>

          <!-- NY local-tax toggles (shown only when State = New York) -->
          <div class="form-group" id="nycQuestion" style="display:none; margin-top: 15px;">
            <label for="nycResident">Subject to New York City Tax?</label>
            <select id="nycResident" name="nycResident">
              <option value="Please Select" disabled selected>Please Select</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>

          <div class="form-group" id="yonkersQuestion" style="display:none;">
            <label for="yonkersResident">Subject to Yonkers Tax?</label>
            <select id="yonkersResident" name="yonkersResident">
              <option value="Please Select" disabled selected>Please Select</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>

          </div>

          <div class="form-group">
            <label for="residentInState">Resident in State:</label>
            <select id="residentInState" name="residentInState" required>
              <option value="please select" disabled selected>Please Select</option>
              <option value="Yes">Yes</option>
              <option value="No">No</option>
            </select>
          </div>

          <!-- NEW: additional states with income -->
          <div class="form-group">
            <label for="numOtherStates">Number of Additional States with Income (W-2, K-1, etc.):</label>
            <select id="numOtherStates" name="numOtherStates">
              <option value="0" selected>0</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
            </select>
          </div>

          <!-- NEW: dynamic additional-state selectors (max 3) -->
          <div id="otherStatesContainer"></div>          

          <div class="form-group">
            <label for="olderthan65">How many 65 or older:</label>
            <select id="olderthan65" name="olderthan65_select" required>
              <option value="Please Select" disabled selected>Please Select</option>
              <option value="0">0</option>
              <option value="1">1</option>
              <option value="2">2</option>
            </select>
            <input type="hidden" id="olderthan65_hidden" name="olderthan65" value="">
          </div>
          
            <div class="form-group">
            <label for="blind">How many blind:</label>
            <select  id="blind" name="blind" min="0" required>
            <option value="please select">Please Select</option>
            <option value="Zero">0</option>
            <option value="One">1</option>
            <option value="Two">2</option>
          </select>
          </div>

          <div class="form-group">
            <label for="numOfBusinesses">How many businesses is the Client affiliated with?:</label>
            <input type="number" id="numOfBusinesses" name="numOfBusinesses" min="0" required>
          </div>

          <!-- <section id="numOfBusinessesSection" > -->
            <div id="numOfBusinessesContainer"></div>
          <!-- </section> -->
          
          <!-- Combined Children/Dependents -->
          <div class="form-group">
            <label for="numberOfDependents">Number of Children/Dependents:</label>
            <input type="number" id="numberOfDependents" name="numberOfDependents" min="0" required>
          </div>
 
          <!-- Container for dependents (Dynamic fields) -->
          <section id="dependentsSection">
            <div id="dependentsContainer"></div>
          </section>

      </div>
      </section>

      <!-- Income Section -->
      <section id="income">
        <h2 data-target="incomeContent">Income</h2>
        <div id="incomeContent">

      <!-- W-2 Section -->
      <section id="w2s">
        <h2 data-target="w2sContainer">W-2</h2>
        <div id="w2sContainer">
          <!-- Dynamically added W-2 blocks will appear here -->
        </div>
        <button type="button" id="addW2Btn" class="add-w2-btn">
          Add a W-2? <span class="plus-symbol">+</span>
        </button>
      </section>

        <div class="form-group">
          <label for="wages">Wages, Salaries, Tips:</label>
          <input type="text" id="wages" name="wages" min="0" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="taxExemptInterest">Tax-Exempt Interest:</label>
          <input type="text" id="taxExemptInterest" name="taxExemptInterest" class="currency-field" >
        </div>

        <div class="form-group">
          <label for="taxableInterest">Taxable Interest:</label>
          <input type="text" id="taxableInterest" name="taxableInterest" class="currency-field">
        </div>

        <div class="form-group">
          <label for="taxableIRA">Taxable IRA:</label>
          <input type="text" id="taxableIRA" name="taxableIRA" class="currency-field">
        </div>

        <div class="form-group">
          <label for="taxableDividends">Taxable Ordinary Dividends:</label>
          <input type="text" id="taxableDividends" name="taxableDividends" class="currency-field">
        </div>

        <div class="form-group">
          <label for="qualifiedDividends">Qualified Dividends:</label>
          <input type="text" id="qualifiedDividends" name="qualifiedDividends" class="currency-field">
        </div>
        
        <div class="form-group">
          <label for="iraDistributions">IRA Distributions:</label>
          <input type="text" id="iraDistributions" name="iraDistributions" class="currency-field">
        </div>
        
        <div class="form-group">
          <label for="pensions">Taxable Pensions and Annuities:</label>
          <input type="text" id="pensions" name="pensions" class="currency-field">
        </div>
        
        <div class="form-group">
          <label for="longTermCapitalGains">Long-Term Capital Gain or (loss):</label>
          <input type="text" id="longTermCapitalGains" name="longTermCapitalGains" class="currency-field">
        </div>

        <div class="form-group">
          <label for="shortTermCapitalGains">Short-Term Capital Gain or (loss):</label>
          <input type="text" id="shortTermCapitalGains" name="shortTermCapitalGains" class="currency-field">
        </div>

      <!-- ── Special‑Rate Capital Gains (collapsible) ───────────── -->
      <section id="specialGains">
        <h2 data-target="specialGainsContainer">
          Schedule-D (Optional Entry)
        </h2>
      
        <div id="specialGainsContainer" class="collapsible-content">
          <div class="form-group">
            <label for="unrecapturedSection1250Gain">
              Unrecaptured §1250 Gain (25 % rate):
            </label>
            <input type="text"
                   id="unrecapturedSection1250Gain"
                   name="unrecapturedSection1250Gain"
                   class="currency-field">
          </div>
        
          <div class="form-group">
            <label for="collectiblesGain">
              28 % Rate Gain Worksheet (collectibles / §1202):
            </label>
            <input type="text"
                   id="collectiblesGain"
                   name="collectiblesGain"
                   class="currency-field">
          </div>
        </div>
      </section>

        <div class="form-group">
          <label for="numScheduleEs">How many Schedule E's?</label>
          <input type="number" id="numScheduleEs" name="numScheduleEs" min="0">
        </div>

        <section id="scheduleEs">
          <div id="scheduleEsContainer"></div>
        </section>

        <div class="form-group">
          <label for="otherIncome">Other Income (Loss Carryforward):</label>
          <input type="text" id="otherIncome" name="otherIncome" class="currency-field">
        </div>

        <div class="form-group">
          <label for="interestPrivateBonds">Interest from Private Activity Bonds:</label>
          <input type="text" id="interestPrivateBonds" name="interestPrivateBonds" class="currency-field">
        </div>

        <div class="form-group">
          <label for="passiveActivityLossAdjustments">Passive Activity Loss Adjustments:</label>
          <input type="text" id="passiveActivityLossAdjustments" name="passiveActivityLossAdjustments" class="currency-field">
        </div>

        <div class="form-group">
          <label for="qualifiedBusinessDeduction">Qualified Business Deduction:</label>
          <input type="text" id="qualifiedBusinessDeduction" name="qualifiedBusinessDeduction" class="currency-field">
        </div>

        <div class="form-group">
          <label for="totalIncome">Total Personal Income:</label>
          <input type="text" id="totalIncome" name="totalIncome" class="currency-field" readonly>
        </div>

      </div>
      </section>

      <!-- Businesses Section -->
      <section id="businesses">

      <h2 data-target="businessContent">Business</h2>

      <div id="businessContent">

        <div id="businessContainer"></div>

        <button type="button" id="addBusinessBtn" class="add-w2-btn" style="margin-bottom: 15px;">
          Add a Business? <span class="plus-symbol">+</span>
        </button>

        <div id="businessTotalContainer" class="business-total">
          <label for="netTotalBusinesses">Net Total of All Businesses:</label>
          <input type="text" id="netTotalBusinesses" name="netTotalBusinesses" readonly>
        </div>

      </div>
      </section>

      <!-- Adjusted Gross Income -->
      <section id="adjustedGrossIncome">
        <h2 data-target="adjustedGrossIncomeContent">Adjusted Gross Income</h2>
        <div id="adjustedGrossIncomeContent">

        <div class="form-group">
          <label for="totalOfAllIncome">Total of all Income:</label>
          <input type="text" id="totalOfAllIncome" name="totalOfAllIncome" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="halfSETax">Half of Self-Employemnt Tax:</label>
          <input type="text" id="halfSETax" name="halfSETax" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="retirementDeduction">Retirement Deduction:</label>
          <input type="text" id="retirementDeduction" name="retirementDeduction" class="currency-field">
        </div>

        <div class="form-group">
          <label for="medicalReimbursementPlan">Medical Reimbursement Plan:</label>
          <input type="text" id="medicalReimbursementPlan" name="medicalReimbursementPlan" class="currency-field">
        </div>

        <div class="form-group">
          <label for="SEHealthInsurance">Self-Employed Health Insurance:</label>
          <input type="text" id="SEHealthInsurance" name="SEHealthInsurance" class="currency-field">
        </div>

        <div class="form-group">
          <label for="alimonyPaid">Alimony Paid:</label>
          <input type="text" id="alimonyPaid" name="alimonyPaid" class="currency-field">
        </div>

        <div class="form-group">
          <label for="otherAdjustments">Other Adjustments:</label>
          <input type="text" id="otherAdjustments" name="otherAdjustments" class="currency-field">
        </div>

        <div class="form-group">
          <label for="totalAdjustedGrossIncome">Total Adjusted Gross Income:</label>
          <input type="text" id="totalAdjustedGrossIncome" name="totalAdjustedGrossIncome" class="currency-field" readonly >
        </div>

        </div>
      </section>

      <!-- Deductions Section -->
      <section id="Deductions">
        <h2 data-target="deductionsContent">Deductions</h2>
        <div id="deductionsContent">

        <div class="form-group">
          <label for="medical">Medical:</label>
          <input type="text" id="medical" name="medical" class="currency-field">
        </div>

        <div class="form-group">
        <label for="stateAndLocalTaxes">State and Local taxes:</label>
          <input type="text" id="stateAndLocalTaxes" name="stateAndLocalTaxes" class="currency-field">
        </div>

        <div class="form-group">
          <label for="otherTaxesFromSchK-1">Other Taxes from Schedule K-1:</label>
            <input type="text" id="otherTaxesFromSchK-1" name="otherTaxesFromSchK-1" class="currency-field">
          </div>
        
        <div class="form-group">
          <label for="interest">Interest:</label>
            <input type="text" id="interest" name="interest" class="currency-field">
        </div>

        <div class="form-group">
          <label for="contributions">Contributions:</label>
            <input type="text" id="contributions" name="contributions" class="currency-field">
        </div>

        <div class="form-group">
          <label for="otherDeductions">Other Deductions:</label>
            <input type="text" id="otherDeductions" name="otherDeductions" class="currency-field">
        </div>

        <div class="form-group">
          <label for="carryoverLoss">Carryover Loss:</label>
            <input type="text" id="carryoverLoss" name="carryoverLoss" class="currency-field">
        </div>

        <div class="form-group">
          <label for="casualtyAndTheftLosses">Casualty and Theft Losses:</label>
            <input type="text" id="casualtyAndTheftLosses" name="casualtyAndTheftLosses" class="currency-field">
        </div>

        <div class="form-group">
          <label for="miscellaneousDeductions">Miscellaneous Deductions:</label>
            <input type="text" id="miscellaneousDeductions" name="miscellaneousDeductions" class="currency-field">
        </div>

        <div class="form-group">
          <label for="standardOrItemizedDeduction">Standard or Itemized Deduction:</label>
            <input type="text" id="standardOrItemizedDeduction" name="standardOrItemizedDeduction" class="currency-field">
        </div>

        <div class="form-group">
          <label for="totalDeductions">Total Deductions:</label>
          <input type="text" id="totalDeductions" name="totalDeductions" class="currency-field" readonly>
        </div>
        
        </div>
      </section>

      <!-- Tax and Credits Section -->
      <section id="taxAndCredits">
        <h2 data-target="taxAndCreditsContent">Tax and Credits</h2>
        <div id="taxAndCreditsContent">        
        
        <div class="form-group">
          <label for="taxableIncome">Taxable Income:</label>
          <input type="text" id="taxableIncome" name="taxableIncome" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="tax">Tax:</label>
          <input type="text" id="tax" name="tax" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="additionalMedicareTax">Additional Medicare Tax:</label>
          <input type="text" id="additionalMedicareTax" name="additionalMedicareTax" class="currency-field" readonly>
        </div>

        <div class="form-group">
          <label for="netInvestmentTax">Net Investment Tax:</label>
          <input type="text" id="netInvestmentTax" name="netInvestmentTax" class="currency-field">
        </div>

        <div class="form-group">
          <label for="selfEmploymentTax">Self-Employment Tax:</label>
          <input type="text" id="selfEmploymentTax" name="selfEmploymentTax" class="currency-field" required readonly>
        </div>
      
        <div class="form-group">
          <label for="otherTaxes">Other Taxes:</label>
          <input type="text" id="otherTaxes" name="otherTaxes" class="currency-field">
        </div>

        <div class="form-group">
          <label for="foreignTaxCredit">Foreign Tax Credit:</label>
          <input type="text" id="foreignTaxCredit" name="foreignTaxCredit" class="currency-field">
        </div>
      
        <div class="form-group">
          <label for="AMT">AMT:</label>
          <input type="text" id="AMT" name="AMT" class="currency-field">
        </div>
    
        <div class="form-group">
          <label for="creditForChildAndDependentCareExpenses">Credit for Child and Dependent Care Expenses:</label>
          <input type="text" id="creditForChildAndDependentCareExpenses" name="creditForChildAndDependentCareExpenses" class="currency-field" >
        </div>
      
        <div class="form-group">
          <label for="generalBusinessCredit">General Business Credit:</label>
          <input type="text" id="generalBusinessCredit" name="generalBusinessCredit" class="currency-field">
        </div>

        <div class="form-group">
          <label for="childTaxCredit">Child Tax Credit:</label>
          <input type="text" id="childTaxCredit" name="childTaxCredit" class="currency-field" readonly>
          <small id="childTaxCreditDetails" class="calculation-details">Automatically calculated based on qualifying dependents and income</small>
        </div>
      
        <div class="form-group">
          <label for="otherCredits">Other Credits:</label>
          <input type="text" id="otherCredits" name="otherCredits" class="currency-field">
        </div>

        <div class="form-group">
          <label for="educationCredits">Education Credits:</label>
          <input type="text" id="educationCredits" name="educationCredits" class="currency-field">
        </div>

        <div class="form-group">
          <label for="totalFederalTax">Total Federal Tax:</label>
          <input type="text" id="totalFederalTax" name="totalFederalTax" class="currency-field" readonly required>
        </div>

        </div>
      </section>

      <!-- Payments Section -->
      <section id="payments">
        <h2 data-target="paymentsContent">Payments</h2>
        <div id="paymentsContent">        

        <div class="form-group">
          <label for="withholdings">Withholdings:</label>
          <input type="text" id="withholdings" name="withholdings" class="currency-field">
        </div>

        <div class="form-group">
          <label for="withholdingsOnAdditionalMedicareWages">Withholdings on Additional Medicare Wages:</label>
          <input type="text" id="withholdingsOnAdditionalMedicareWages" name="withholdingsOnAdditionalMedicareWages" class="currency-field">
        </div>

        <div class="form-group">
          <label for="estimatedTaxPayments">Estimated Tax Payments:</label>
          <input type="text" id="estimatedTaxPayments" name="estimatedTaxPayments" class="currency-field">
        </div>

        <div class="form-group">
          <label for="otherPaymentsAndCredits">Other Payments and Credits:</label>
          <input type="text" id="otherPaymentsAndCredits" name="otherPaymentsAndCredits" class="currency-field">
        </div>

        <div class="form-group">
          <label for="penalty">Penalty:</label>
          <input type="text" id="penalty" name="penalty" class="currency-field">
        </div>

        <div class="form-group">
          <label for="estimatedRefundOverpayment">Estimated Refund (Overpayment):</label>
          <input type="text" id="estimatedRefundOverpayment" name="estimatedRefundOverpayment" class="currency-field" readonly required>
        </div>

        <div class="form-group">
          <label for="estimatedBalanceDue">Estimated Balance Due:</label>
          <input type="text" id="estimatedBalanceDue" name="estimatedBalanceDue" class="currency-field" readonly required>
        </div>

        </div> 
      </section>

      <!-- Employer and Employee Taxes Section -->
      <section id="employerEmployeeTaxes">
        <h2 data-target="employerEmployeeTaxesContent">
          Employer and Employee Taxes
        </h2>
        <div id="employerEmployeeTaxesContent">
          <div class="form-group">
            <div class="form-group">
              <label for="employeeTaxes">Employee Taxes:</label>
              <input type="text" id="employeeTaxes" name="employeeTaxes" class="currency-field" readonly required>
            </div>
            <div class="form-group">
              <label for="employerTaxes">Employer Taxes:</label>
              <input type="text" id="employerTaxes" name="employerTaxes" class="currency-field" readonly required>
            </div>
            <!-- Static fields for unemployment taxes -->
            <div class="form-group">
              <label for="staticUnemployment2022_2025">Unemployment 2022 - 2025:</label>
              <input type="text" id="staticUnemployment2022_2025" name="staticUnemployment2022_2025" class="currency-field" readonly>
            </div>
            <div class="form-group">
              <label for="staticFUTA">FUTA:</label>
              <input type="text" id="staticFUTA" name="staticFUTA" class="currency-field" readonly>
            </div>
          </div>
        </div>
      </section>

      <!-- State Taxable Income Section -->
      <section id="stateTaxableIncome">
        <h2 data-target="stateTaxableIncomeContent">State Taxable Income</h2>

      <button type="button" id="calculateStateTaxesBTN" style="display:block; margin:0 auto 1rem;">
        Calculate State Taxes
      </button>

      <div id="stateTaxableIncomeContent"> 

        <!-- NEW: one header per state (collapsible) -->
        <div id="stateCardsContainer"></div>

        <!-- NEW: shared state panel that moves under whichever card is open -->
        <div id="stateSharedPanel" style="display:none;">

          <!-- dynamic outlier UI lives here (NY, CA, etc.) -->
          <div id="stateDynamicContainer" class="form-group" style="display:none;"></div>

          <!-- existing static block (unchanged) -->
          <div id="stateStaticBlock">
            <div class="form-group">
              <label for="selectState">[ State ]</label>
              <input type="text" placeholder="Input State in &quot;Personal Information&quot;" id="selectState" name="selectState" readonly>
            </div>

            <div class="form-group">
              <label for="stateAdjustedGrossIncome">Taxable Income:</label>
              <input type="text" id="stateAdjustedGrossIncome" name="stateAdjustedGrossIncome" class="currency-field">
            </div>

            <div class="form-group">
              <label for="stateAdditionsToIncome">Additions to Income:</label>
              <input type="text" id="stateAdditionsToIncome" name="stateAdditionsToIncome" class="currency-field">
            </div>

            <div class="form-group">
              <label for="stateDeductions">Deductions from Income:</label>
              <input type="text" id="stateDeductions" name="stateDeductions" class="currency-field">
            </div>

            <div class="form-group">
              <label for="stateTaxableIncomeInput">State Taxable Income:</label>
              <input type="text" id="stateTaxableIncomeInput" name="stateTaxableIncomeInput" class="currency-field" readonly>
            </div>

            <div class="form-group">
              <label for="stateTaxesDue">State Taxes Due:</label>
              <input type="text" id="stateTaxesDue" name="stateTaxesDue" class="currency-field" readonly>
            </div>

            <div class="form-group">
              <label for="stateCredits">Credits:</label>
              <input type="text" id="stateCredits" name="stateCredits" class="currency-field">
            </div>
            
            <div class="form-group">
              <label for="stateAfterTaxDeductions">State After Tax Deductions:</label>
              <input type="text" id="stateAfterTaxDeductions" name="stateAfterTaxDeductions" class="currency-field">
            </div>
          </div>

          <!-- Optional Section (collapsible) (unchanged) -->
          <div class="state-optional-wrapper">
            <h3 data-target="stateOptionalContent" style="cursor: pointer; font-size: 1.5rem; margin-top: 20px; margin-bottom: 15px;">Optional</h3>
            <div id="stateOptionalContent" class="collapsible-content">

              <div class="form-group">
                <label for="localTaxAfterCredits">Local Tax after Credits:</label>
                <input type="text" id="localTaxAfterCredits" name="localTaxAfterCredits" class="currency-field">
              </div>

              <div class="form-group">
                <label for="totalStateTax">Total State Tax:</label>
                <input type="text" id="totalStateTax" name="totalStateTax" class="currency-field" readonly>
              </div>

              <div class="form-group">
                <label for="stateWithholdings">Withholdings:</label>
                <input type="text" id="stateWithholdings" name="stateWithholdings" class="currency-field">
              </div>

              <div class="form-group">
                <label for="statePaymentsAndCredits">Payments and Credits:</label>
                <input type="text" id="statePaymentsAndCredits" name="statePaymentsAndCredits" class="currency-field">
              </div>

              <div class="form-group">
                <label for="stateInterest">Interest:</label>
                <input type="text" id="stateInterest" name="stateInterest" class="currency-field">
              </div>

              <div class="form-group">
                <label for="statePenalty">Penalty:</label>
                <input type="text" id="statePenalty" name="statePenalty" class="currency-field">
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="stateEstimatedRefundOverpayment">Estimated Refund (Overpayment):</label>
            <input type="text" id="stateEstimatedRefundOverpayment" name="stateEstimatedRefundOverpayment" class="currency-field" readonly required>
          </div>

          <div class="form-group">
            <label for="stateEstimatedBalanceDue">Estimated Balance Due:</label>
            <input type="text" id="stateEstimatedBalanceDue" name="stateEstimatedBalanceDue" class="currency-field" readonly required>
          </div>

        </div> <!-- end #stateSharedPanel -->

      </div> <!-- end #stateTaxableIncomeContent -->
      </section>

      <!-- Total Tax -->
      <section id="totalTaxSection">
        <h2 data-target="totalTaxContent">Total Tax</h2>
        <div id="totalTaxContent">

        <div class="form-group">
          <label for="totalTax">Total Tax:</label>
          <input type="text" id="totalTax" name="totalTax" class="currency-field" readonly required>
        </div>

        </div>
      </section>

      <!-- ChatGPT AI Strategy Suggestions (read-only, AI-agnostic) -->
      <section id="ai-strategy">
        <h2 data-target="ai-strategy-content">AI-Powered Strategy Suggestions</h2>
        <div id="ai-strategy-content" class="collapsible-content">
        
          <div class="gw-summary" style="margin-bottom:12px">
            <span class="gw-pill"><strong>AGI</strong> <output id="ai-pill-agi">$0</output></span>
            <span class="gw-pill"><strong>Taxable Income</strong> <output id="ai-pill-ti">$0</output></span>
            <span class="gw-pill"><strong>Auto Marginal Rate</strong> <output id="ai-pill-rate">0%</output></span>
            <span class="gw-pill"><strong>Total Tax</strong> <output id="ai-pill-tt">$0</output></span>
          </div>
        
          <div class="gw-controls" style="margin:8px 0 14px">
            <button id="ai-generate" type="button">Generate AI Suggestions</button>
          </div>
        
          <div id="ai-suggestions" class="gw-card-list" aria-label="AI strategies (read-only)"></div>
        </div>
      </section>

      <!-- 2025 Deduction Box Section -->
      <section class="gw-restruct-card" id="gw-restructure">
        <div class="gw-restruct-header">
          <h2 data-target="gw-restructure-content">Restructure</h2>
        </div>

        <div id="gw-restructure-content">
          <div class="gw-controls">
            <label for="gw-tax-rate">Tax Rate (%)</label>
            <input id="gw-tax-rate" type="number" min="0" max="100" step="0.01" placeholder="%">
            <button id="gw-add-row" type="button">Add Strategy</button>
            <button id="gw-reset" type="button">Reset</button>
            <button id="gw-export" type="button">Export CSV</button>
          </div>
        
          <p class="gw-note">Savings = Tax Rate × Deduction</p>

          <div id="gw-entities" class="gw-entity-list"></div>
        
          <div id="gw-list" class="gw-card-list"></div>
        
          <div class="gw-summary" role="status" aria-live="polite">
            <span class="gw-pill"><strong>Savings:</strong> <span id="gw-t-savings">$0</span></span>
            <span class="gw-pill"><strong>5 Year Savings:</strong> <span id="gw-t-5yr">$0</span></span>
            <span class="gw-pill"><strong>Investments:</strong> <span id="gw-t-investment">$0</span></span>
            <span class="gw-pill"><strong>Retained:</strong> <span id="gw-t-retained">$0</span></span>
            <span class="gw-pill"><strong>Deductions:</strong> <span id="gw-t-deductions">$0</span></span>
          </div>
        </div>

      </section>

      <!-- Strategic Adjustment Summary -->
      <section id="adjustment-summary">
        <h2 data-target="adj-summary-content">Strategic Adjustment Summary</h2>
      
        <div id="adj-summary-content">
        
          <!-- Controls (pills left, buttons right) -->
          <div class="adj-controls">
            <div class="adj-controls-left">
              <span class="gw-pill"><strong>Unadjusted Restructure Savings</strong> <output id="adj-unadjusted">$0</output></span>
              <span class="gw-pill"><strong>Auto Marginal Rate</strong> <output id="adj-auto-rate">0%</output></span>
            </div>
          
            <div class="adj-controls-right">
              <button type="button" id="adj-add-row">Add New Row</button>
              <button type="button" id="adj-reset-rows">Reset to Template</button>
            </div>
          
            <span class="adj-hint">Tip: Select a “Source” to auto-pull the amount; choose “Manual Entry” for custom values.</span>
          </div>
        
          <!-- Lines table -->
          <div class="adj-table" role="table" aria-label="Strategic Adjustment Summary lines">
            <div class="adj-row adj-header" role="row">
              <div class="adj-cell w-desc" role="columnheader">Description</div>
              <div class="adj-cell w-source" role="columnheader">Source</div>
              <div class="adj-cell w-amount" role="columnheader">Amount</div>
              <div class="adj-cell w-del" role="columnheader"></div>
            </div>
            <div id="adj-rows" role="rowgroup"></div>
          </div>
        
          <!-- Totals -->
          <div class="adj-pillbar">
            <span class="gw-pill"><strong>Sum of Adjustments</strong> <output id="adj-sum">$0</output></span>
            <span class="gw-pill"><strong>Adjusted Total Savings</strong> <output id="adj-total">$0</output></span>
            <span class="gw-pill"><strong>Adjusted 5-Year</strong> <output id="adj-total-5">$0</output></span>
          </div>

        </div>
      </section>

      <!-- Submit Button -->
      <!-- <button type="submit" id="submitButton">Submit</button> -->
      <div id="results" class="hidden"></div>

      <!-- NEW: Excel Preview button (in-page modal) -->
      <button type="button" id="previewExcelBtn" class="preview-btn" aria-haspopup="dialog">
        Preview Excel
      </button>

    </form>
  </div>

  <div class="quote-section">
    <p>“If you want to keep most of your paycheck, start by thinking beyond it.”</p>
    <p>— Shawn L. Davenport</p>
  </div>

  <div id="topButton">
    <!-- Back to Top Button -->
    <button id="backToTopBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>
  </div>
      <!-- <button type="submit" id="submitButton">Submit</button> -->
  <!-- Excel Preview Modal -->
  <div id="gwExcelPreview" class="gw-modal hidden" aria-hidden="true">
    <div class="gw-modal__overlay" data-close="1"></div>
    <div class="gw-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="gwPreviewTitle">
      
      <div class="gw-modal__header">
        <h3 id="gwPreviewTitle">Genwealth 360 | Excel Preview</h3>

        <div class="gw-modal__actions">
          <button type="submit" id="submitButton" class="gw-modal__submit">Submit to Excel</button>
          <button type="button" id="gwPreviewClose" class="gw-modal__close">Close</button>
        </div>
      </div>

      <div class="gw-modal__body">
        <div id="gwPreviewEmpty" class="gw-modal__empty hidden">
          No saved columns yet
        </div>

        <div id="gwPreviewGridWrapper" class="gw-gridwrap">
          <table id="gwPreviewGrid" class="gw-grid" aria-describedby="gwPreviewTitle"></table>
        </div>
      </div>

    </div>
  </div>

  <script type="module" src="./script.js"></script>
  
  <h3>&#169; 2025 Genwealth 360 Inc.</h3>
</body>
</html>
