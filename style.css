/* =======================================================================
   Author: Genwealth 360
   Description: Core Styles
   ======================================================================= */

/* =============================
   1) THEME VARIABLES
   ============================= */
:root {
  /* Light */
  --bg-light: #eeeaff;
  --text-light: #4E4C5E;
  --card-light: #ffffff;

  /* Dark */
  --bg-dark: #101828;
  --text-dark: #9199A7;
  --card-dark: #253245;
  --section-dark: #101828;
  --h1-dark: #F8F8F9;
  --h2-dark: #F8F8F9;
  --h3-dark: #F8F8F9;
  --label-dark: #F8F8F9;

  /* Component backgrounds (dark) */
  --dependent-entry: #253245;
  --spouseSection: #253245;
  --business-name-entry: #253245;
  --business-entry: #253245;
  --ScheduleE-dark: #253245;

  /* Inputs (dark) */
  --input-dark: #3c385d;
  --select-dark: #3c385d;
  --input-bg-dark: #333;

  /* Notes */
  --notesEditor-dark: #101828a8;
  --notesContainer-dark: #253245;

  /* Accents */
  --accent: #FDB927;
  --accent-hover: #FFC107;
  --border-dark: #552583;

  /* Disclaimers */
  --disclaimer-red-light: #ff0000;
  --disclaimer-red-dark: #ff4f4f;
}

/* =============================
   2) BASE / TYPOGRAPHY
   ============================= */
body {
  font-family: 'Roboto', sans-serif;
  background-color: var(--bg-light);
  color: #E5E5E5;
  margin: 0;
  padding: 30px 0 0 0;
}

/* Smooth theme transitions (keep list lean) */
body, h1, h2, h3, section, label, input, select, textarea,
button, .container, .navbar, .notes-editor, .notes-container {
  transition: background-color .3s ease, color .3s ease, border-color .3s ease, box-shadow .3s ease;
}

h1, h2 { font-family: 'Merriweather', serif; margin-bottom: 20px; }

h1 { text-align: center; font-size: 2.5rem; color: var(--text-light); }

h2, h3 {
  color: var(--text-light);
  text-align: center;
  padding: 10px 0;
  background-color: #dcd6f6;
  border: 4px solid #552583;
  border-radius: 20px;
}
h2 { font-size: 1.8rem; }
h3 { font-size: 1.3rem; }

h2:hover, h3:hover { background-color: #bbabfc; cursor: pointer; border-radius: 40px; }

.red-disclaimer { color: var(--disclaimer-red-light); font-weight: bold; }
.black-disclaimer { color: black; transition: color .5s ease; }

.dynamic-heading, .apportionment-text { color: var(--text-light); }

/* =============================
   3) LAYOUT / NAV / CONTAINERS
   ============================= */
.navbar {
  position: fixed; top: 0; left: 0; width: 100%;
  background-color: var(--bg-light);
  z-index: 1000;
  display: flex; justify-content: flex-end;
  padding: 5px 20px;
}

.logo { padding: 0; margin-right: 535px; width: 200px; display: block; }

.dropdown { position: relative; display: inline-block; }
.dropbtn {
  background-color: #552583; color: #fff;
  padding: 15px; font-size: 16px; border: 0; cursor: pointer;
  margin-right: 40px; width: 230px; z-index: 100;
  border-radius: 20px; box-shadow: 0 8px 16px rgba(0,0,0,0.2);
}
.dropdown:hover .dropbtn { background-color: var(--accent); }

.dropdown-content {
  display: none; position: absolute; right: 30px; margin-right: 10px;
  min-width: 160px; background-color: #552583; border-radius: 20px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2); z-index: 100;
}
.dropdown-content a {
  color: #fff; padding: 12px 16px; text-align: center; text-decoration: none;
  display: block; border-radius: 40px;
}
.dropdown-content a:hover { background-color: var(--accent); }
.dropdown:hover .dropdown-content { display: block; }

.container {
  position: relative; max-width: 1000px; margin: 40px auto; z-index: 2000;
  background-color: #fff; padding: 30px; border-radius: 25px;
  border: 4px solid #552583; box-shadow: 8px 16px 32px 8px rgba(0,0,0,0.2);
}

/* =============================
   4) CARDS / SECTIONS
   ============================= */
section {
  margin-bottom: 30px; padding: 20px;
  background-color: #EFEAF8;
  border: 4px solid #552583; border-radius: 20px;
  box-shadow: 0 2px 5px rgba(0,0,0,.4);
}
#spouseSection,
.dependent-entry,
.business-entry,
.business-name-entry,
.owner-section,
.w2-code-box,
.w2-block,
.schedule-e-entry {
  background-color: #fff;
  padding: 15px; margin-bottom: 15px;
  border-radius: 20px; border: 4px solid #552583;
}
.w2-block { margin-bottom: 20px; }

/* =============================
   5) NOTES
   ============================= */
.notes-area { position: fixed; top: 10px; left: 10px; z-index: 2000; display: flex; align-items: center; }
.notes-btn {
  background-color: #552583; color: #fff; border: none; cursor: pointer;
  padding: 15px 30px; font-size: 16px; border-radius: 20px;
  box-shadow: 0 4px 6px rgba(0,0,0,.2);
}
.notes-btn:hover { background-color: var(--accent); color: #552583; }

.notes-container {
  display: flex; flex-direction: column; position: absolute; top: 60px; left: 0;
  width: 405px; height: 405px; padding: 10px; box-sizing: border-box;
  background-color: #ffffff93; border: 2px solid #552583; border-radius: 15px;
  box-shadow: 0 6px 8px rgba(0,0,0,.2);
}
.hidden { display: none !important; }

.notes-toolbar { display: flex; gap: 8px; margin-bottom: 6px; }
.notes-toolbar button {
  background-color: #552583; color: #fff; border: none; cursor: pointer;
  padding: 6px 10px; font-size: 14px; border-radius: 4px;
}
.notes-toolbar button:hover { background-color: var(--accent); color: #552583; }

.notes-editor {
  flex: 1; overflow-y: auto; border: none; outline: none;
  font-size: 1.3rem; color: #333; font-family: 'Roboto', sans-serif;
  padding: 8px; box-sizing: border-box; border: 2px solid #552583; background-color: #fff;
}

/* =============================
   6) FORMS
   ============================= */
.form-group { margin-bottom: 15px; }

label { display: block; font-weight: bold; margin-bottom: 5px; color: var(--text-light); }

input, select {
  width: 100%; padding: 10px; font-size: 1rem;
  background-color: #FFFFFF; color: #000;
  border: 2px solid var(--text-light); border-radius: 5px; box-sizing: border-box;
}
/* Universal active-typing highlight */
input:focus, select:focus, textarea:focus {
  border-color: var(--accent) !important;
  background-color: #FFFACD !important;
  box-shadow: 0 0 5px rgba(253,185,39,0.6);
  outline: none;
}

.checkbox-container { display: flex; align-items: center; margin-top: 12px; }
.checkbox-container input[type="checkbox"] { width: 25px; height: 25px; margin-right: 10px; cursor: pointer; }
.checkbox-container label { font-size: 18px; color: var(--text-light); cursor: pointer; }
.checkbox-container input[type="checkbox"]:checked { accent-color: #4cd565; }

.calculation-details { display: block; font-size: .85rem; color: #666; margin-top: 4px; font-style: italic; line-height: 1.3; }

.input-completed { border: 2px solid #4cd565; }
.auto-copied { border: 2px solid #ffff00; }
.input-error { border: 2px solid red; }

/* STATE section helpers */
.state-field-loading { position: relative; opacity: .7; }
.state-field-loading::after {
  content: ''; position: absolute; top: 50%; right: 10px; width: 16px; height: 16px; margin-top: -8px;
  border: 2px solid #f3f3f3; border-top: 2px solid var(--accent); border-radius: 50%;
  animation: state-loading-spin 1s linear infinite;
}
@keyframes state-loading-spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.state-field-success { border-color: #4CAF50 !important; background-color: rgba(76,175,80,.1); }
.state-field-error   { border-color: #f44336 !important; background-color: rgba(244,67,54,.1); }

#stateTaxableIncomeContent .currency-field[readonly] { background-color: rgba(253,185,39,.1); color: #333; font-weight: normal; }

/* =============================
   7) BUTTONS
   ============================= */
button {
  display: block; width: 100%; background-color: #552583; color: #E5E5E5;
  padding: 12px; border: none; font-size: 1.2rem; font-weight: bold; border-radius: 40px;
  cursor: pointer; transition: background-color .3s ease;
}
button:hover { background-color: var(--accent); }

.arrow-btn {
  display: inline-block; width: auto; background-color: #552583; color: #E5E5E5;
  padding: 5px 10px; font-size: 1rem; border: none; border-radius: 6px; cursor: pointer;
  margin-left: 8px; margin-top: 0;
}
.arrow-btn:hover { background-color: var(--accent); color: #552583; }

.add-w2-btn { background-color: #552583; color: #fff; border: none; cursor: pointer; padding: 10px 20px; font-size: 1rem; border-radius: 20px; margin-top: 15px; transition: background-color .3s ease; }
.add-w2-btn:hover { background-color: var(--accent); color: #552583; }
.plus-symbol { font-weight: bold; margin-left: 5px; }

.remove-w2-btn,
.remove-business-btn {
  background-color: #ff4f4f; color: #fff; border: none; cursor: pointer;
  padding: 8px 16px; font-size: .9rem; border-radius: 20px; margin-top: 10px;
  transition: background-color .3s ease;
}
.remove-business-btn { margin-bottom: 5px; }
.remove-w2-btn:hover, .remove-business-btn:hover { background-color: #ff0000; }

.undo-redo-buttons { display: flex; gap: 10px; margin-left: 10px; }
.undo-redo-buttons .notes-btn { margin: 0 1px; }

/* =============================
   8) UTILITIES / MISC
   ============================= */
.quote-section {
  margin-top: 40px; text-align: center; font-style: italic; color: #E5E5E5;
  font-size: 1.2rem; padding: 15px; background-color: #552583; border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,.4);
}
.quote-section p { margin: 5px 0; }

#backToTopBtn {
  display: none; position: fixed; bottom: 20px; right: 30px; width: 68px; z-index: 99;
  background-color: #552583; color: #fff; border: none; padding: 15px; border-radius: 20px; font-size: 18px; cursor: pointer;
  box-shadow: 0 8px 16px rgba(0,0,0,.2); transition: background-color .3s ease, box-shadow .3s ease;
}
#backToTopBtn:hover { background-color: var(--accent); box-shadow: 0 6px 12px rgba(0,0,0,.3); }

.state-breakdown-rows-container { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
.state-breakdown-row { display: flex; gap: 10px; }
.state-breakdown-left, .state-breakdown-right { flex: 1; }

.collapsible-content { max-height: 0; overflow: hidden; transition: max-height .4s ease-in-out; }
.collapsible-content.active { max-height: 2000px; }

#petSprite { transition: top 1.0s ease-in-out, left 1.0s ease-in-out; pointer-events: none; }
#doNotTouchBtn { background-color: #ff4f4f; color: #fff; border: none; cursor: pointer; padding: 10px 20px; font-size: 1rem; border-radius: 20px; margin-top: 15px; transition: background-color .3s ease; }

/* Tax due pill */
.ccorp-tax-due {
  border: 2px solid #4CAF50; padding: 10px; border-radius: 20px; font-weight: bold;
  background-color: #EFEEF2; color: var(--text-light);
}

/* Reasonable Compensation */
.res-comp-container { display: flex; flex-direction: column; margin-bottom: 8px; }
.res-comp-label { font-weight: bold; color: var(--text-light); margin-bottom: 4px; }
.res-comp-input {
  width: 100%; padding: 10px; border: 2px solid var(--text-light); border-radius: 5px;
  background-color: #FFFFFF; color: #000000; margin-bottom: 8px; box-sizing: border-box;
}
.res-comp-btn-container { display: flex; gap: 10px; justify-content: center; }
.res-comp-btn {
  padding: 6px 10px; font-size: 1rem; margin-top: 20px; margin-bottom: 10px;
  background-color: #552583; color: #E5E5E5; border: none; border-radius: 20px; cursor: pointer; transition: background-color .3s ease;
}
.res-comp-btn:hover { background-color: var(--accent); color: #552583; }

/* =============================
   9) DARK MODE (OVERRIDES ONLY)
   ============================= */
body.dark-mode { background-color: var(--bg-dark) !important; color: var(--text-dark) !important; }
body.dark-mode input, body.dark-mode select, body.dark-mode textarea { color: var(--h3-dark) !important; }
body.dark-mode input:-webkit-autofill { -webkit-text-fill-color: var(--h3-dark) !important; }

.dark-mode .container { background-color: var(--card-dark) !important; color: var(--text-dark) !important; box-shadow: 0 4px 8px rgba(0,0,0,.6) !important; }
.dark-mode .navbar { background-color: #101828 !important; color: #F8F8F9 !important; }

.dark-mode input { background-color: var(--input-dark) !important; color: var(--text-dark) !important; }
.dark-mode select { background-color: var(--select-dark) !important; color: var(--text-dark) !important; }

/* Opened listbox (options) */
body.dark-mode select option,
body.dark-mode select optgroup { background-color: var(--card-dark); color: var(--h3-dark); }
body.dark-mode select option:hover,
body.dark-mode select option:checked { background-color: #2f3a4a; color: var(--h1-dark); }
body.dark-mode select option[disabled],
body.dark-mode select optgroup[disabled] { color: #6f7a88; opacity: 1; }

/* Focus ring parity (gold) */
body.dark-mode input:focus,
body.dark-mode select:focus,
body.dark-mode textarea:focus {
  border-color: var(--accent) !important;
  background-color: rgba(253,185,39,.2) !important;
  box-shadow: 0 0 5px rgba(253,185,39,.5);
  outline: none;
}

/* Sections / cards */
.dark-mode section { background-color: var(--section-dark) !important; border-color: var(--border-dark) !important; }
.dark-mode .schedule-e-entry { background-color: var(--ScheduleE-dark) !important; }
.dark-mode .spouseSection { background-color: var(--spouseSection) !important; }
.dark-mode .business-name-entry { background-color: var(--business-name-entry) !important; }
.dark-mode .business-entry { background-color: var(--business-entry) !important; }
.dark-mode .dependent-entry { background-color: var(--dependent-entry) !important; }
body.dark-mode .w2-block { background-color: var(--business-entry); border-color: var(--border-dark); color: var(--h3-dark); }
body.dark-mode .w2-code-box { background-color: var(--business-entry) !important; border-color: var(--border-dark) !important; }

.dark-mode label { color: var(--label-dark) !important; }
.dark-mode h1 { color: var(--h1-dark); }
.dark-mode h2, .dark-mode h3 {
  color: var(--h2-dark);
  background-color: #552583; border: none; border-radius: 20px;
  border-bottom: 4px solid #552583; border-top: 4px solid #552583; border-right: 4px solid #552583; border-left: 4px solid #552583;
}
.dark-mode h2:hover, .dark-mode h3:hover { background-color: var(--accent-hover); border-radius: 20px; cursor: pointer; }

body.dark-mode .dynamic-heading, body.dark-mode .apportionment-text { color: var(--h3-dark); }
body.dark-mode .red-disclaimer { color: var(--disclaimer-red-dark) !important; }
body.dark-mode .black-disclaimer { color: white; }

.dark-mode .notes-editor { background-color: var(--notesEditor-dark) !important; color: var(--h3-dark) !important; border: 2px solid var(--border-dark) !important; }
.dark-mode .notes-container { background-color: var(--notesContainer-dark) !important; border: 4px solid var(--border-dark); }

body.dark-mode .ccorp-tax-due { background-color: #3c385d; color: var(--h3-dark); }

body.dark-mode .res-comp-label { color: var(--h3-dark); }
body.dark-mode .res-comp-input { background-color: var(--input-dark); color: var(--h3-dark); border: 2px solid var(--border-dark); }
body.dark-mode .res-comp-btn { background-color: #552583; color: var(--h3-dark); }
body.dark-mode .res-comp-btn:hover { background-color: var(--accent); color: #552583; }

.dark-mode-toggle { position: relative; width: 60px; height: 25px; }
.dark-mode-toggle input[type="checkbox"] { display: none; }
.dark-mode-label {
  background-color: #552583; border-radius: 25px; top: 8px; right: 30px;
  width: 130%; height: 129%; display: block; cursor: pointer; position: relative;
  transition: background-color .3s ease;
}
.toggle-ball { position: absolute; top: 2px; left: 2px; width: 28px; height: 28px; background-color: #fff; border-radius: 50%; transition: transform .5s ease, background-color .5s ease; }
.dark-mode-toggle input[type="checkbox"]:checked + .dark-mode-label { background-color: var(--accent); }
.dark-mode-toggle input[type="checkbox"]:checked + .dark-mode-label .toggle-ball { transform: translateX(45px); }

.dark-mode #stateTaxableIncomeContent .currency-field[readonly] { background-color: rgba(253,185,39,.2); color: var(--h3-dark); }

#calculateStateTaxesBTN.state-update {
  background: linear-gradient(135deg, #ff7a59, #ff9f1a);
  color: #1b1b1b;
}

/* Smooth, on-button gradient while loading */
@property --mix {
  syntax: '<percentage>';
  inherits: false;
  initial-value: 0%;
}

#calculateStateTaxesBTN.is-loading {
  --mix: 0%;
  background: linear-gradient(
    135deg,
    color-mix(in oklab, #fa4e22 calc(100% - var(--mix)), #ff9f1a var(--mix)),
    color-mix(in oklab, #ff9f1a calc(100% - var(--mix)), #fa4e22 var(--mix))
  );
  background-size: 200% 200%;
  animation: stateBtnPulse 0.9s ease-in-out infinite alternate;
  color: #1b1b1b;            /* stays readable on warm gradient */
  cursor: progress;          /* keep the loading cursor */
}

@keyframes stateBtnPulse {
  0%   { --mix: 0%;   background-position: 0% 50%; }
  100% { --mix: 100%; background-position: 100% 50%; }
}

/* Button loading animation (replaces separate state-progress bar) */
#calculateStateTaxesBTN.is-loading {
  position: relative;
  cursor: progress;
}

/* === Restructure Card UI (replaces the old grid/table styles) === */

/* neutralize your global h2 & button rules inside this component only */
.gw-restruct-header {
  background: transparent !important;
  border: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  text-align: left !important;
  color: inherit !important;
  font-weight: 800 !important;
  font-size: clamp(24px, 3vw, 34px) !important;
  cursor: default !important;
}
.gw-controls button,
#gw-add-row, #gw-reset, #gw-export {
  display: inline-flex !important;
  width: auto !important;
  align-items: center;
  justify-content: center;
  height: 36px;
  padding: 6px 12px !important;
  font-size: 14px !important;
  line-height: 1 !important;
  border-radius: 8px !important;
}

/* toolbar + rate input */
.gw-controls {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 10px 12px;
  background: var(--card-dark);
  border: 2px solid var(--border-dark);
  border-radius: 12px;
}
#gw-tax-rate {
  height: 36px;
  line-height: 36px;
  font-size: 14px;
  max-width: 110px;
}

/* card list */
.gw-card-list {
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
}
@media (min-width: 880px) {
  .gw-card-list { grid-template-columns: repeat(auto-fit, minmax(380px, 1fr)); }
}

/* single card */
.gw-card {
  background: #fff;
  border: 4px solid #552583;
  border-radius: 16px;
  padding: 14px;
}
body.dark-mode .gw-card {
  background: var(--business-entry);
  border-color: var(--border-dark);
}

/* card header: name + delete */
.gw-card-head {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 10px;
  align-items: center;
  margin-bottom: 10px;
}
.gw-card .gw-del {
  background: #ff4f4f;
  color: #fff;
  border: none;
  border-radius: 8px;
  padding: 6px 10px;
  cursor: pointer;
}
.gw-card .gw-del:hover { background: #ff0000; }

/* card body grid (three fields + chips) */
.gw-card-grid {
  display: grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 10px;
  align-items: end;
}
@media (max-width: 640px) {
  .gw-card-grid { grid-template-columns: 1fr; }
}

/* money inputs scoped here */
.gw-money {
  width: 100% !important;
  padding: 10px !important;
  box-sizing: border-box;
  font-size: 14px;
}

/* computed chips */
.gw-chips {
  grid-column: 1 / -1;
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 8px;
}
.gw-chip {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 999px;
  background: #EFEAF8;
  border: 2px solid #552583;
  font-weight: 700;
}
body.dark-mode .gw-chip {
  background: rgba(253,185,39,.1);
  color: var(--h3-dark);
  border-color: var(--border-dark);
}

/* footer summary */
.gw-summary {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-top: 14px;
}
.gw-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  background: #EFEAF8;
  border: 2px solid #552583;
}
body.dark-mode .gw-summary .gw-pill {
  background: var(--section-dark);
  border-color: var(--border-dark);
  color: var(--h3-dark);
}

/* small helper */
.gw-note { color: var(--text-light); font-size: 12px; margin: 10px 0 14px; }

